# Test

各[テストデータ](../testdata/)について、実施したテスト結果と検証事項を示す。

## [1.csv](../testdata/1.csv)

```bash
$ anamoni testdata/1.csv
サーバー故障期間
1       10.20.30.1                              2022/12/01 00:03:01
2       10.20.30.2      2022/12/01 00:03:02     2022/12/01 00:08:02
3       10.20.30.1      2022/12/01 00:06:01
サブネット故障期間
1       10.20.0.0       2022/12/01 00:06:01     2022/12/01 00:08:02
```

- サーバー故障期間の出力確認 (アドレス 開始日時 終了日時)
- 1 件目のログからタイムアウトの場合は開始日時非表示
- 最後のログまでタイムアウトの場合は終了日時非表示

## [2.csv](../testdata/2.csv)

```bash
$ anamoni -n 1 testdata/2.csv
サーバー故障期間
1       10.20.30.1      2022/12/01 00:01:01     2022/12/01 00:02:01
2       10.20.30.2      2022/12/01 00:01:02     2022/12/01 00:03:02
3       10.20.30.1      2022/12/01 00:04:01     2022/12/01 00:08:01
4       10.20.30.2      2022/12/01 00:05:02     2022/12/01 00:08:02
サブネット故障期間
1       10.20.0.0       2022/12/01 00:01:02     2022/12/01 00:02:01
2       10.20.0.0       2022/12/01 00:05:02     2022/12/01 00:08:01
```

- n = 1 のときは全てのタイムアウト期間を出力
- 開始日時はタイムアウトが発生し始めたとき

```bash
$ anamoni -n 4 testdata/2.csv
サーバー故障期間
1       10.20.30.1      2022/12/01 00:04:01     2022/12/01 00:08:01
```

- n 回以上連続したタイムアウト期間を出力

```bash
$ anamoni -n 5 testdata/2.csv
-- no output --
```

- n 回以上連続のタイムアウトがない場合は何も出力しない

## [3.csv](../testdata/3.csv)

```bash
$ anamoni -m 1 -t 100 testdata/3.csv
サーバー故障期間
1       10.20.30.1      2022/12/01 00:01:01     2022/12/01 00:02:01
2       10.20.30.2      2022/12/01 00:01:02     2022/12/01 00:03:02
3       10.20.30.1      2022/12/01 00:04:01     2022/12/01 00:08:01
4       10.20.30.2      2022/12/01 00:05:02     2022/12/01 00:08:02
サーバー過負荷期間
1       10.20.30.1      2022/12/01 00:09:01     2022/12/01 00:10:01
2       10.20.30.2      2022/12/01 00:10:02     2022/12/01 00:13:02
サブネット故障期間
1       10.20.0.0       2022/12/01 00:01:02     2022/12/01 00:02:01
2       10.20.0.0       2022/12/01 00:05:02     2022/12/01 00:08:01
```

- サーバー過負荷期間の出力確認 (アドレス 開始日時 終了日時)

```bash
$ anamoni -m 1 -t 300 testdata/3.csv
サーバー故障期間
1       10.20.30.1      2022/12/01 00:01:01     2022/12/01 00:02:01
2       10.20.30.2      2022/12/01 00:01:02     2022/12/01 00:03:02
3       10.20.30.1      2022/12/01 00:04:01     2022/12/01 00:08:01
4       10.20.30.2      2022/12/01 00:05:02     2022/12/01 00:08:02
サーバー過負荷期間
1       10.20.30.1      2022/12/01 00:09:01     2022/12/01 00:10:01
2       10.20.30.2      2022/12/01 00:11:02     2022/12/01 00:13:02
サブネット故障期間
1       10.20.0.0       2022/12/01 00:01:02     2022/12/01 00:02:01
2       10.20.0.0       2022/12/01 00:05:02     2022/12/01 00:08:01
```

- 応答時間が t ミリ秒を超えた期間をサーバー過負荷期間として出力

```bash
$ anamoni -m 3 -t 300 testdata/3.csv
サーバー故障期間
1       10.20.30.1      2022/12/01 00:01:01     2022/12/01 00:02:01
2       10.20.30.2      2022/12/01 00:01:02     2022/12/01 00:03:02
3       10.20.30.1      2022/12/01 00:04:01     2022/12/01 00:08:01
4       10.20.30.2      2022/12/01 00:05:02     2022/12/01 00:08:02
サーバー過負荷期間
1       10.20.30.2      2022/12/01 00:10:02     2022/12/01 00:13:02
サブネット故障期間
1       10.20.0.0       2022/12/01 00:01:02     2022/12/01 00:02:01
2       10.20.0.0       2022/12/01 00:05:02     2022/12/01 00:08:01
```

- 直近 m 回の平均応答時間が t ミリ秒を超えた期間をサーバー過負荷期間として出力

## [4.csv](../testdata/4.csv)

```bash
$ anamoni testdata/4.csv
サーバー故障期間
1       10.20.30.1      2022/12/01 00:01:01     2022/12/01 00:04:01
2       10.20.30.2      2022/12/01 00:01:02     2022/12/01 00:04:02
3       10.20.30.3      2022/12/01 00:01:03     2022/12/01 00:04:03
4       192.168.1.1     2022/12/01 00:01:04     2022/12/01 00:04:04
5       192.168.1.2     2022/12/01 00:03:05     2022/12/01 00:06:05
6       192.168.1.1     2022/12/01 00:05:04     2022/12/01 00:08:04
サブネット故障期間
1       10.20.0.0       2022/12/01 00:01:03     2022/12/01 00:04:01
2       192.168.1.0     2022/12/01 00:03:05     2022/12/01 00:04:04
3       192.168.1.0     2022/12/01 00:05:04     2022/12/01 00:06:05
```

- サブネット故障期間の出力確認 (アドレス 開始日時 終了日時)
